## People perception utils package
This packge contains useful utils for the people perception like the conversion of the robots odometry to a motion matrix to substitude the visual odometry and a logging node to save the detections to the message_store.

All the information given on how to run the nodes should only be used if you need to run them seperately. In normal cases please refer to the `strands_perception_people_launch` package to start the whole perception pipeline.

### odom2visual
This node creates a motion matrix from the robots odometry using the Eigen library to substitude the visual odometry.

Run with:

`roslaunch strands_perception_people_utils odom2visual.launch`

Parameters:
* `odom`: _Default: /odom_ The topic on which the robots odometry is published
* `motion_parameters`: _Default: /visual_odometry/motion_matrix_ The topic on which the resulting motion matrix is published

### Logging
This node uses the `strands_msgs/strands_perception_people_msgs/msg/Logging.msg` to save the detected people together with their realworld position, the robots pose, the upper body detector and pedestrian tracker results, and the tf transform used to create the real world coordinates in the message store.

Run with:

`roslaunch strands_perception_people_utils logging.launch`

Parameters:
* `log`: _Default: true_ This convenience parameter allows to start the whole system without logging the data

### to_pose_array
Small node that takes in an arbitrary message from a topic and extracts a pose according to a given identifier. The found poses are published as a geometry_msgs/PoseArray. The node is used to transform the output of any people detector to a pose array for the people_tracker. The node is configured using the detectors.yaml in the config directory:

```
to_pose_array:
    detectors:                                  # Add detectors under this namespace
        leg_detector:                           # Name of detector (used internally to identify them. Has to be unique.
            topic: "/people_tracker_measurements"  # The topic on which the geometry_msgs/PoseArray is published
            point_name: "pos"                   # The name of the point containing the coordinates in question
```

The parameter namespace `to_pose_array/detectors` can contain as many sub namespaces as needed. The above example shows the namespace `to_pose_array/detectors/leg_detector` which contains the information to parse the messages generated by the ros hydro package `leg_detector`. 

1. `topic`: this string is the topic name under which the messages containing the positions are published.
1. `point_name`: this string specifies the identifier for the detected positions. In this case the leg_detector publishes a message which caontains data like:
```
pos.x
pos.y
pos.z
```
The message is parsed for all occurences of the `pos` identifier and the result is published as a `PoseArray`.

Run with
```
roslaunch strands_perception_people_utils to_pose_array.launch
```
